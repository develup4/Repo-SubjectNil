//
// 파일명 : CTitleButton.h
// 
// 설명 : 타이틀 버튼 클래스의 정의.
//
// 김성후(lonkth@naver.com)
// 2010.01.03 최종 수정
//

#include "CTitleButton.h"


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// CTitleButton(int x, int y, int width, int height, LPDIRECT3DDEVICE9 pd3dDevice, CCursor* cursor, LPD3DXSPRITE sprite, char* onFilePath, char* offFilePath)
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// 설명 : CTitleButton 클래스의 생성자.
//		  타이틀 버튼의 수치데이터를 초기화한다.
//		  타이틀 버튼 텍스쳐를 등록한다.
//
// 2010.01.03 최종수정
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

CTitleButton::CTitleButton(int x, int y, int width, int height, LPDIRECT3DDEVICE9 pd3dDevice, CCursor* cursor, LPD3DXSPRITE sprite, char* onFilePath, char* offFilePath)
{
	this->x = x;
	this->y = y;
	this->width = width;
	this->height = height;
	this->cursor = cursor;
	this->sprite = sprite;
	D3DXCreateTextureFromFile(pd3dDevice, onFilePath, &tButtonOn);
	D3DXCreateTextureFromFile(pd3dDevice, offFilePath, &tButtonOff);
}


//////////////////////////////////////////////////////////////////////////////////////////
// ~CTitleButton()
//////////////////////////////////////////////////////////////////////////////////////////
//
// 설명 : CTitleButton 클래스의 소멸자.
//		  텍스쳐를 해제한다.
//
// 2010.01.03 최종수정
//////////////////////////////////////////////////////////////////////////////////////////

CTitleButton::~CTitleButton()
{
	tButtonOn->Release();
	tButtonOff->Release();
}


//////////////////////////////////////////////////////////////////////////////////////////
// bool MouseOnCheck()
//////////////////////////////////////////////////////////////////////////////////////////
//
// 설  명 : 마우스 커서가 객체 위에 올라와있는지를 체크하는 함수
// 리턴값 : Boolean값(커서가 올라왔는지 여부)
//
// 2010.01.03 최종수정
//////////////////////////////////////////////////////////////////////////////////////////

bool CTitleButton::MouseOnCheck()
{
	POINT ptCursor = cursor->GetCursorPoint();

	if(ptCursor.x >= x && ptCursor.x <= x + width && ptCursor.y >= y && ptCursor.y <= y + height)
	{
		return true;
	}
	else
	{
		return false;
	}
}


//////////////////////////////////////////////////////////////////////////////////////////
// void Draw()
//////////////////////////////////////////////////////////////////////////////////////////
//
// 설명 : 객체를 그려주는 함수
//
// 2010.01.03 최종수정
//////////////////////////////////////////////////////////////////////////////////////////

void CTitleButton::Draw()
{
	sprite->Begin(D3DXSPRITE_ALPHABLEND);
	RECT rc = {0, 0, width, height};
	D3DXVECTOR3 pos((float) x, (float) y, 0);
	sprite->Draw(MouseOnCheck() ? tButtonOn : tButtonOff, &rc, NULL, &pos, D3DCOLOR_RGBA(255, 255, 255, 255));
	sprite->End();
}