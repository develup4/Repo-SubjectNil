//
// 파일명 : CD3D.h
// 
// 설명 : CD3D 클래스의 정의
//
// 김성후(lonkth@naver.com)
// 2010.01.03 최종 수정
//


#include "CD3D.h"


//////////////////////////////////////////////////////////////////////////////////////////
// CD3D(HWND hWnd)
//////////////////////////////////////////////////////////////////////////////////////////
//
// 설명 : CD3D 클래스의 생성자.
//		  D3D 객체를 생성한다.
//		  D3D Device 객체를 생성한다.
//		  D3D Font 객체를 생성한다.
//
// 2010.01.03 최종수정
//////////////////////////////////////////////////////////////////////////////////////////

CD3D::CD3D(HWND hWnd)
{
	pD3D = Direct3DCreate9(D3D_SDK_VERSION);

	D3DPRESENT_PARAMETERS d3dpp;
	ZeroMemory(&d3dpp, sizeof(d3dpp));
	d3dpp.Windowed = true;
	d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;
	d3dpp.BackBufferFormat = D3DFMT_UNKNOWN;
	d3dpp.EnableAutoDepthStencil = TRUE;
	d3dpp.AutoDepthStencilFormat = D3DFMT_D16;
	//d3dpp.PresentationInterval = D3DPRESENT_INTERVAL_IMMEDIATE; //시스템이 가능한 최대 프레임율

	//Device 생성
	pD3D->CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hWnd, D3DCREATE_SOFTWARE_VERTEXPROCESSING, &d3dpp, &pd3dDevice);

	//Font 생성
	D3DXCreateFont(pd3dDevice, 25, 0, FW_BOLD, 0, FALSE, DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, "휴먼아미체", &pFont);
}


//////////////////////////////////////////////////////////////////////////////////////////
// CD3D(HWND hWnd)
//////////////////////////////////////////////////////////////////////////////////////////
//
// 설명 : CD3D 클래스의 소멸자.
//		  D3D 객체를 해제한다.
//		  D3D Device 객체를 해제한다.
//		  D3D Font 객체를 해제한다.
//
// 2010.01.03 최종수정
//////////////////////////////////////////////////////////////////////////////////////////

CD3D::~CD3D()
{
	SAFE_RELEASE(pd3dDevice);
	SAFE_RELEASE(pD3D);
	SAFE_RELEASE(pFont);
}


//////////////////////////////////////////////////////////////////////////////////////////
// LPDIRECT3D9 GetD3DPointer() const
//////////////////////////////////////////////////////////////////////////////////////////
//
// 설  명 : D3D 객체의 포인터를 반환하는 함수.
// 리턴값 : LPDIRECT3D9 pD3D(D3D 객체의 포인터)
//
// 2010.01.03 최종수정
//////////////////////////////////////////////////////////////////////////////////////////

LPDIRECT3D9 CD3D::GetD3DPointer() const
{
	return pD3D;
}


//////////////////////////////////////////////////////////////////////////////////////////
// LPDIRECT3DDEVICE9 GetD3DDevicePointer() const
//////////////////////////////////////////////////////////////////////////////////////////
//
// 설  명 : D3D Device 객체의 포인터를 반환하는 함수.
// 리턴값 : LPDIRECT3DDEVICE9 pd3dDevice(D3D Device 객체의 포인터)
//
// 2010.01.03 최종수정
//////////////////////////////////////////////////////////////////////////////////////////

LPDIRECT3DDEVICE9 CD3D::GetD3DDevicePointer() const
{
	return pd3dDevice;
}


//////////////////////////////////////////////////////////////////////////////////////////
// LPD3DXFONT GetFontPointer() const
//////////////////////////////////////////////////////////////////////////////////////////
//
// 설  명 : D3D Font 객체의 포인터를 반환하는 함수.
// 리턴값 : LPD3DXFONT pFont(D3D Font 객체의 포인터)
//
// 2010.01.03 최종수정
//////////////////////////////////////////////////////////////////////////////////////////

LPD3DXFONT CD3D::GetFontPointer() const
{
	return pFont;
}